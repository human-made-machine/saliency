# Vertex AI Training Job Configuration
# Use with: gcloud ai custom-jobs create --config=vertex-ai-config.yaml

# GPU Training Configuration (SALICON)
# Uncomment and modify as needed
---
displayName: msi-net-salicon-training
workerPoolSpecs:
  - machineSpec:
      machineType: n1-standard-8
      acceleratorType: NVIDIA_TESLA_T4
      acceleratorCount: 1
    replicaCount: 1
    containerSpec:
      imageUri: us-central1-docker.pkg.dev/YOUR_PROJECT/saliency/msi-net-gpu:latest
      args:
        - train
        - -d
        - salicon
      env:
        - name: GCS_OUTPUT_PATH
          value: gs://hmm-ml-models/fixation/salicon/

---
# GPU Training Configuration (Fine-tuning on fixationadd1000)
displayName: msi-net-fixationadd1000-training
workerPoolSpecs:
  - machineSpec:
      machineType: n1-standard-8
      acceleratorType: NVIDIA_TESLA_T4
      acceleratorCount: 1
    replicaCount: 1
    containerSpec:
      imageUri: us-central1-docker.pkg.dev/YOUR_PROJECT/saliency/msi-net-gpu:latest
      args:
        - train
        - -d
        - fixationadd1000
        - -p
        - gs://hmm-ml-models/fixation/add1000/
      env:
        - name: GCS_OUTPUT_PATH
          value: gs://hmm-ml-models/fixation/fixationadd1000/

---
# TPU v5e Training Configuration (SALICON)
# TPU v5e: ~$1.20/chip/hour, best price-performance for TF training
displayName: msi-net-salicon-tpu-training
workerPoolSpecs:
  - machineSpec:
      machineType: ct5lp-hightpu-1t
      # TPU v5e with 1x1 topology (single chip)
    replicaCount: 1
    containerSpec:
      imageUri: us-central1-docker.pkg.dev/YOUR_PROJECT/saliency/msi-net-tpu:latest
      args:
        - train
        - -d
        - salicon
      env:
        - name: GCS_OUTPUT_PATH
          value: gs://hmm-ml-models/fixation/salicon/
        - name: PJRT_DEVICE
          value: TPU

---
# High-performance GPU Configuration (A100)
# Use for faster training when cost is less of a concern
displayName: msi-net-salicon-a100-training
workerPoolSpecs:
  - machineSpec:
      machineType: a2-highgpu-1g
      acceleratorType: NVIDIA_TESLA_A100
      acceleratorCount: 1
    replicaCount: 1
    containerSpec:
      imageUri: us-central1-docker.pkg.dev/YOUR_PROJECT/saliency/msi-net-gpu:latest
      args:
        - train
        - -d
        - salicon
      env:
        - name: GCS_OUTPUT_PATH
          value: gs://hmm-ml-models/fixation/salicon/
